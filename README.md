# show-md-file

`show-md-file` 是一个基于 **FastAPI** 的 Markdown 浏览器，可以批量扫描指定目录下的 `.md` 文件并在浏览器中即时预览内容。新版界面经过全面优化，在桌面与移动端之间无缝切换，提供更优雅、舒适的阅读体验。

## 功能亮点

- **目录自动扫描**：递归遍历配置的根目录及其子目录中所有 Markdown 文件。
- **即时预览**：点击任意文件即可在右侧（或移动端的主区域）渲染 Markdown 内容。
- **文件信息展示**：同步显示文件所在目录、名称与最后修改时间，便于定位与比较。
- **快速搜索**：支持实时关键字过滤，并提供友好的空状态提示。
- **响应式界面**：侧边目录在桌面端常驻显示，移动端可通过顶部“汉堡”按钮展开/收起，阅读区自动适配屏幕。
- **操作日志**：项目根目录新增 `update.md`，用于记录关键操作和时间戳，方便追踪更新轨迹。

## 项目结构

```
show-md-file/
├── env.ini               # 运行配置
├── main.py               # FastAPI 应用入口
├── requirements.txt      # 依赖清单
├── README.md             # 使用说明（当前文件）
├── restart.bat           # Windows 批处理启动脚本
├── restart.ps1           # PowerShell 启动脚本
├── run.log               # 运行日志
├── static/
│   ├── css/style.css     # 前端样式表
│   └── js/script.js      # 前端交互脚本
├── templates/
│   └── index.html        # Jinja2 模板
└── update.md             # 操作记录（带时间戳）
```

## 环境准备

```bash
pip install -r requirements.txt
```

## 运行方式

1. 根据需求编辑 `env.ini`：

   ```ini
   [settings]
   # 需要扫描的目录
   scanfolder=../fc_aliyun

   # 服务监听配置
   host=0.0.0.0
   port=8000
   ```

2. 启动服务：

   - **Windows**：推荐双击 `restart.ps1`，自动停止旧进程、启动新实例并写入 `run.log`。
   - **跨平台**：在命令行执行 `python main.py`。

3. 浏览器访问 `http://localhost:8000` 即可使用。

## 界面说明

- **桌面端**：左侧常驻目录树，右侧为内容区。选中条目后自动高亮，并滚动到正文顶部。
- **移动端**：顶部汉堡按钮用于展开目录；选择文件后目录自动收起，主区域充满屏幕便于阅读。
- **搜索体验**：输入框实时过滤文件名称，若无匹配项会显示提示信息；清空搜索即可恢复列表。
- **提示状态**：内容区在加载或出现错误时会展示不同色调的提示块，方便快速判断当前状态。

## 技术栈

- FastAPI + Uvicorn：提供高效的 API 与服务能力。
- Jinja2：渲染页面模板。
- Markdown：负责 Markdown 文本解析。
- 现代化前端布局：Flexbox、CSS 变量与媒体查询确保跨终端体验一致。

## 日志

- 所有运行日志写入 `run.log`。
- 所有关键操作与命令记录在 `update.md`，方便复盘与追踪。

欢迎继续定制界面或扩展其他能力，例如收藏夹、文件置顶、主题切换等。
